<Window x:Class="POSSystem.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:POSSystem"
        Title="2nd Eden - Professional POS System" Height="800" Width="1400"
        WindowState="Maximized"
        MinWidth="1200" MinHeight="700"
        Background="#F8F9FA">

    <Window.Resources>
        <!-- Enhanced Button Styles with Better Visual Feedback -->
        <Style x:Key="SidebarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="12" 
                                Width="50" Height="50">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                            <Border.RenderTransform>
                                <ScaleTransform x:Name="ScaleTransform" ScaleX="1" ScaleY="1"/>
                            </Border.RenderTransform>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF8C42"/>
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="ScaleTransform" 
                                                           Storyboard.TargetProperty="ScaleX" 
                                                           To="1.1" Duration="0:0:0.1"/>
                                            <DoubleAnimation Storyboard.TargetName="ScaleTransform" 
                                                           Storyboard.TargetProperty="ScaleY" 
                                                           To="1.1" Duration="0:0:0.1"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="ScaleTransform" 
                                                           Storyboard.TargetProperty="ScaleX" 
                                                           To="1.0" Duration="0:0:0.1"/>
                                            <DoubleAnimation Storyboard.TargetName="ScaleTransform" 
                                                           Storyboard.TargetProperty="ScaleY" 
                                                           To="1.0" Duration="0:0:0.1"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ActiveSidebarButtonStyle" TargetType="Button" BasedOn="{StaticResource SidebarButtonStyle}">
            <Setter Property="Background" Value="#FF8C42"/>
        </Style>

        <!-- Enhanced Category Button with Better Animation -->
        <Style x:Key="CategoryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="White"/>
            <Setter Property="Foreground" Value="#666"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="Padding" Value="18,10"/>
            <Setter Property="Margin" Value="5,2"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="8"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"
                                            Margin="{TemplateBinding Padding}"/>
                            <Border.Effect>
                                <DropShadowEffect Color="Black" BlurRadius="2" ShadowDepth="1" Opacity="0.1"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FFF4E6"/>
                                <Setter Property="BorderBrush" Value="#FF8C42"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ActiveCategoryButtonStyle" TargetType="Button" BasedOn="{StaticResource CategoryButtonStyle}">
            <Setter Property="Background" Value="#FF8C42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#FF8C42"/>
        </Style>

        <!-- Enhanced Product Card with Better Hover Effects -->
        <Style x:Key="ProductCardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" BlurRadius="4" ShadowDepth="2" Opacity="0.1"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#FFF8F0"/>
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)" 
                                               To="1.05" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" 
                                               To="1.05" Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)" 
                                               To="1.0" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)" 
                                               To="1.0" Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Enhanced Action Button Style -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="0,15"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                            <Border.Effect>
                                <DropShadowEffect Color="Black" BlurRadius="3" ShadowDepth="1" Opacity="0.2"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Opacity" Value="0.9"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Opacity" Value="0.8"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <!-- Sidebar: Collapsible width -->
            <ColumnDefinition x:Name="SidebarColumn" Width="250" MinWidth="80"/>
            <!-- Main content: Takes remaining space -->
            <ColumnDefinition Width="0.6*" MinWidth="400"/>
            <!-- Cart: Fixed minimum width with max percentage -->
            <ColumnDefinition Width="0.22*" MinWidth="280" MaxWidth="350"/>
        </Grid.ColumnDefinitions>

        <!-- Left Sidebar -->
        <Border Grid.Column="0" Background="#E85A2B" CornerRadius="0,20,20,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header with User Info -->
                <StackPanel Grid.Row="0" Margin="15,15,15,10">
                    <!-- Toggle Button (Hamburger Menu) -->
                    <Button x:Name="ToggleButton" 
                            Click="ToggleSidebar_Click"
                            Background="Transparent" BorderThickness="0" 
                            HorizontalAlignment="Left" 
                            Width="40" Height="40"
                            ToolTip="Toggle Sidebar">
                        <Border Background="White" CornerRadius="8" Width="35" Height="35">
                            <TextBlock Text="≡" FontSize="18" HorizontalAlignment="Center" 
                                      VerticalAlignment="Center" Foreground="#E85A2B" FontWeight="Bold"/>
                        </Border>
                    </Button>

                    <!-- User Info Panel -->
                    <StackPanel x:Name="UserInfoPanel" Margin="0,15,0,0">
                        <TextBlock Text="Welcome," Foreground="#FFB366" FontSize="12"/>
                        <TextBlock Text="Restaurant Staff" Foreground="White" FontSize="16" FontWeight="Bold"/>
                        <TextBlock Text="Today: Shift 1" Foreground="#FFB366" FontSize="11" Margin="0,2,0,0"/>
                    </StackPanel>
                </StackPanel>

                <!-- Quick Stats -->
                <Border Grid.Row="1" Background="#D7361A" CornerRadius="8" Margin="15,0,15,15" Padding="12">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Today's Sales" Foreground="#FFB366" FontSize="10"/>
                            <TextBlock Text="₱2,450" Foreground="White" FontSize="14" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Orders" Foreground="#FFB366" FontSize="10"/>
                            <TextBlock Text="23" Foreground="White" FontSize="14" FontWeight="Bold"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Navigation Menu -->
                <StackPanel x:Name="SidebarExpandedPanel" Grid.Row="2" Margin="8,0,8,0">
                    <!-- New Sales (Active) -->
                    <Button Background="#FF8C42" BorderThickness="0" Margin="5" Padding="20,15" 
                            HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" 
                            Cursor="Hand"
                            ToolTip="Start a new sale transaction">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="8">
                                    <ContentPresenter Margin="{TemplateBinding Padding}" 
                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                    VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🛒" FontSize="16" Margin="0,0,12,0" Foreground="White"/>
                            <TextBlock Text="New Sales" FontSize="12" Foreground="White"/>
                        </StackPanel>
                    </Button>

                    <!-- Settings with Enhanced Features -->
                    <Button Background="Transparent" BorderThickness="0" Margin="5" Padding="20,15" 
                            HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" 
                            Cursor="Hand"
                            Click="Settings_Click"
                            ToolTip="Configure system settings">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="8">
                                    <ContentPresenter Margin="{TemplateBinding Padding}" 
                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                    VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="⚙️" FontSize="16" Margin="0,0,12,0" Foreground="White"/>
                            <TextBlock Text="Settings" FontSize="12" Foreground="White"/>
                        </StackPanel>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#FF8C42"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- Backoffice -->
                    <Button Background="Transparent" BorderThickness="0" Margin="5" Padding="20,15" 
                            HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" 
                            Cursor="Hand"
                            Click="Backoffice_Click"
                            ToolTip="Access management features">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="8">
                                    <ContentPresenter Margin="{TemplateBinding Padding}" 
                                                    HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                    VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🖥️" FontSize="16" Margin="0,0,12,0" Foreground="White"/>
                            <TextBlock Text="Backoffice" FontSize="12" Foreground="White"/>
                        </StackPanel>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#FF8C42"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>

                <!-- Collapsed Sidebar (icons only) -->
                <StackPanel x:Name="SidebarIconsPanel" Grid.Row="2" 
                            Margin="10,10,10,0" HorizontalAlignment="Center"
                            Visibility="Collapsed">

                    <!-- New Sales Icon -->
                    <Button Width="50" Height="50" Margin="0,8" 
                            Background="#FF8C42" BorderThickness="0" 
                            Cursor="Hand"
                            ToolTip="New Sales">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="12" 
                                        Width="50" Height="50">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <TextBlock Text="🛒" FontSize="20" Foreground="White"/>
                    </Button>

                    <!-- Settings Icon -->
                    <Button Width="50" Height="50" Margin="0,8" 
                            Background="Transparent" BorderThickness="0" 
                            Cursor="Hand"
                            Click="Settings_Click"
                            ToolTip="Settings">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="12" 
                                        Width="50" Height="50">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <TextBlock Text="⚙️" FontSize="20" Foreground="White"/>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#FF8C42"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <!-- Backoffice Icon -->
                    <Button Width="50" Height="50" Margin="0,8" 
                            Background="Transparent" BorderThickness="0" 
                            Cursor="Hand"
                            Click="Backoffice_Click"
                            ToolTip="Backoffice">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="12" 
                                        Width="50" Height="50">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <TextBlock Text="🖥️" FontSize="20" Foreground="White"/>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#FF8C42"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>

                <!-- Footer -->
                <StackPanel Grid.Row="3" Margin="15">
                    <TextBlock Text="SE68462117 | V 1.168.6" 
                              Foreground="#FFB366" 
                              FontSize="9" 
                              HorizontalAlignment="Center"/>
                    <TextBlock Text="🔐 Secure Connection" 
                              Foreground="#FFB366" 
                              FontSize="8" 
                              HorizontalAlignment="Center"
                              Margin="0,2,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid Grid.Column="1" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" Margin="0,0,0,15">
                <StackPanel>
                    <TextBlock Text="Point of Sale" FontSize="24" FontWeight="Bold" Foreground="#333"/>
                    <TextBlock Text="Select a category to browse items" FontSize="14" Foreground="#666" Margin="0,2,0,0"/>
                </StackPanel>
            </Grid>

            <!-- Category Selection Cards -->
            <Grid Grid.Row="1" x:Name="CategorySelectionGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Foods Card -->
                <Border Grid.Column="0" Background="White" CornerRadius="16" 
                        BorderBrush="#E0E0E0" BorderThickness="1"
                        Cursor="Hand" MouseDown="FoodsCard_Click">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" BlurRadius="5" ShadowDepth="2" Opacity="0.1"/>
                    </Border.Effect>
                    <Border.Style>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#FFF8F0"/>
                                    <Setter Property="BorderBrush" Value="#FF8C42"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <StackPanel Margin="40" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Border Background="#FF8C42" CornerRadius="50" Width="100" Height="100" Margin="0,0,0,20">
                            <TextBlock Text="🍽️" FontSize="48" HorizontalAlignment="Center" 
                                      VerticalAlignment="Center" Foreground="White"/>
                        </Border>
                        <TextBlock Text="FOODS" FontSize="24" FontWeight="Bold" 
                                  HorizontalAlignment="Center" Foreground="#333" Margin="0,0,0,10"/>
                        <TextBlock Text="Main dishes, breakfast, desserts and more" 
                                  FontSize="14" Foreground="#666" TextAlignment="Center" 
                                  TextWrapping="Wrap" HorizontalAlignment="Center"/>
                        <Button Content="Browse Foods" Margin="0,20,0,0" Padding="20,12" 
                               Background="#FF8C42" Foreground="White" BorderThickness="0" 
                               FontWeight="Bold" FontSize="14" Cursor="Hand" 
                               Click="FoodsCard_Click">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" 
                                                       CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                    VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#E67A36"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Beverages Card -->
                <Border Grid.Column="2" Background="White" CornerRadius="16" 
                        BorderBrush="#E0E0E0" BorderThickness="1"
                        Cursor="Hand" MouseDown="BeveragesCard_Click">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" BlurRadius="5" ShadowDepth="2" Opacity="0.1"/>
                    </Border.Effect>
                    <Border.Style>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#F0F8FF"/>
                                    <Setter Property="BorderBrush" Value="#4A90E2"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <StackPanel Margin="40" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Border Background="#4A90E2" CornerRadius="50" Width="100" Height="100" Margin="0,0,0,20">
                            <TextBlock Text="🥤" FontSize="48" HorizontalAlignment="Center" 
                                      VerticalAlignment="Center" Foreground="White"/>
                        </Border>
                        <TextBlock Text="BEVERAGES" FontSize="24" FontWeight="Bold" 
                                  HorizontalAlignment="Center" Foreground="#333" Margin="0,0,0,10"/>
                        <TextBlock Text="Coffee, juices, sodas and refreshing drinks" 
                                  FontSize="14" Foreground="#666" TextAlignment="Center" 
                                  TextWrapping="Wrap" HorizontalAlignment="Center"/>
                        <Button Content="Browse Beverages" Margin="0,20,0,0" Padding="20,12" 
                               Background="#4A90E2" Foreground="White" BorderThickness="0" 
                               FontWeight="Bold" FontSize="14" Cursor="Hand"
                               Click="BeveragesCard_Click">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" 
                                                       CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                    VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#3A7BC8"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Products Grid (Initially Hidden) -->
            <Grid Grid.Row="1" x:Name="ProductsGrid" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Back Button and Category Title -->
                <Grid Grid.Row="0" Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <Button Grid.Column="0" Content="← Back to Categories" 
                           Background="#E0E0E0" Foreground="#333" BorderThickness="0" 
                           Padding="15,8" Margin="0,0,15,0" FontWeight="Bold" 
                           Cursor="Hand" Click="BackToCategories_Click">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" 
                                                   CornerRadius="8" Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center" 
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#D0D0D0"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    
                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock x:Name="CategoryTitleTextBlock" Text="Foods" 
                                  FontSize="20" FontWeight="Bold" Foreground="#333"/>
                        <TextBlock Text="Click items to add to your order" 
                                  FontSize="12" Foreground="#666" Margin="0,2,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Products Display -->
                <Border Grid.Row="1" Background="White" CornerRadius="12" Padding="15"
                        BorderBrush="#E0E0E0" BorderThickness="1">
                    <Border.Effect>
                        <DropShadowEffect Color="Black" BlurRadius="3" ShadowDepth="1" Opacity="0.1"/>
                    </Border.Effect>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Category Filter Bar -->
                        <Border Grid.Row="0" Background="#F8F9FA" CornerRadius="8" Padding="15" Margin="0,0,0,15">
                            <StackPanel>
                                <TextBlock Text="Categories" FontSize="14" FontWeight="Bold" Foreground="#333" Margin="0,0,0,10"/>
                                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                                    <StackPanel x:Name="CategoryFilterPanel" Orientation="Horizontal">
                                        <!-- Category buttons will be populated dynamically -->
                                    </StackPanel>
                                </ScrollViewer>
                            </StackPanel>
                        </Border>

                        <!-- Products Header - REMOVED INSTRUCTION TEXT -->
                        <!-- No header needed here as category bar provides context -->
                        
                        <!-- Products List -->
                        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                            <ItemsControl x:Name="ProductsItemsControl">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Columns="3"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>

                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Style="{StaticResource ProductCardStyle}"
                                                MouseLeftButtonUp="ProductCard_Click"
                                                Tag="{Binding}"
                                                ToolTip="{Binding Name}">
                                            <StackPanel Margin="15">
                                                <Border Background="#F5F5F5" CornerRadius="8" Height="120" Margin="0,0,0,10">
                                                    <Image Source="{Binding ImagePath}" Stretch="UniformToFill"
                                                           StretchDirection="Both"/>
                                                </Border>
                                                <Border Background="#FF8C42" CornerRadius="15"
                                                        Padding="8,4" HorizontalAlignment="Center" Margin="0,0,0,8">
                                                    <TextBlock Text="{Binding Price, StringFormat=₱{0:F2}}"
                                                               Foreground="White" FontWeight="Bold" FontSize="12"/>
                                                </Border>
                                                <TextBlock Text="{Binding Name}" HorizontalAlignment="Center"
                                                           FontSize="13" Foreground="#333" FontWeight="Medium"
                                                           TextWrapping="Wrap" TextAlignment="Center"/>
                                                <TextBlock Text="Click to add" HorizontalAlignment="Center"
                                                           FontSize="10" Foreground="#999" 
                                                           Margin="0,4,0,0"/>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>
        </Grid>

        <!-- Enhanced Right Sidebar - Cart -->
        <Border Grid.Column="2" Background="White" CornerRadius="20,0,0,20" Margin="0,20,0,20"
                BorderBrush="#E0E0E0" BorderThickness="1,0,0,0">
            <Border.Effect>
                <DropShadowEffect Color="Black" BlurRadius="5" ShadowDepth="2" Opacity="0.1"/>
            </Border.Effect>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Cart Header -->
                <StackPanel Grid.Row="0" Margin="20,20,20,10">
                    <TextBlock Text="Current Order" FontSize="18" FontWeight="Bold" Foreground="#333"/>
                    <TextBlock Text="Review your items below" FontSize="12" Foreground="#666" Margin="0,2,0,0"/>
                </StackPanel>

                <!-- Cart Items -->
                <ScrollViewer Grid.Row="1" Margin="20,0" VerticalScrollBarVisibility="Auto">
                    <StackPanel x:Name="CartItemsPanel">
                        <!-- Empty cart message -->
                        <Border Background="#F8F9FA" CornerRadius="8" Padding="20" Margin="0,10">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="🛒" FontSize="32" HorizontalAlignment="Center" Opacity="0.5"/>
                                <TextBlock Text="Your cart is empty" FontSize="14" Foreground="#666" 
                                          HorizontalAlignment="Center" Margin="0,8,0,0"/>
                                <TextBlock Text="Add items from the menu" FontSize="12" Foreground="#999" 
                                          HorizontalAlignment="Center" Margin="0,2,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>

                <!-- Subtotal with Enhanced Design -->
                <Border Grid.Row="2" Margin="20,15,20,10" Padding="15" Background="#F8F9FA" CornerRadius="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Subtotal" FontWeight="Medium" VerticalAlignment="Center" FontSize="14"/>
                            <TextBlock x:Name="SubtotalTextBlock" 
                                      Grid.Column="1" 
                                      Text="₱0.00" 
                                      FontWeight="Bold" 
                                      VerticalAlignment="Center"
                                      FontSize="14"/>
                        </Grid>

                        <Grid Grid.Row="1" Margin="0,5,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Tax (12%)" FontSize="12" Foreground="#666"/>
                            <TextBlock Text="₱0.00" FontSize="12" Foreground="#666" Grid.Column="1"/>
                        </Grid>

                        <Separator Grid.Row="2" Margin="0,8,0,8"/>

                        <Grid Grid.Row="3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Total" FontWeight="Bold" FontSize="16"/>
                            <TextBlock Text="₱0.00" FontWeight="Bold" FontSize="16" Grid.Column="1"/>
                        </Grid>
                    </Grid>
                </Border>

                <!-- Enhanced Action Buttons -->
                <Grid Grid.Row="3" Margin="20,0,20,20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Button x:Name="OpenBillsButton"
                               Grid.Column="0" 
                               Content="💾 Save Order" 
                               Background="#FF8C42" 
                               Foreground="White" 
                               Style="{StaticResource ActionButtonStyle}"
                               Margin="0,0,5,0"
                               Click="OpenBillsButton_Click"
                               ToolTip="Save order for later"/>

                        <Button Grid.Column="1" 
                               Content="💳 Charge ₱0.00" 
                               Background="#4CAF50" 
                               Foreground="White" 
                               Style="{StaticResource ActionButtonStyle}"
                               Margin="5,0,0,0"
                               Click="ChargeButton_Click"
                               ToolTip="Process payment"/>
                    </Grid>

                    <Button Grid.Row="1" Content="🗑️ Clear Cart" 
                           Background="#F44336" Foreground="White" 
                           Style="{StaticResource ActionButtonStyle}"
                           Margin="0,8,0,0"
                           ToolTip="Clear all items from cart"/>
                </Grid>
            </Grid>
        </Border>

        <!-- Enhanced Save Receipt Popup -->
        <Border x:Name="SaveReceiptPopup" 
                Background="#80000000" 
                Visibility="Collapsed"
                Grid.ColumnSpan="3"
                MouseDown="PopupBackground_MouseDown">
            <Border Background="White" 
                    CornerRadius="16" 
                    Width="450" 
                    Height="500" 
                    VerticalAlignment="Center" 
                    HorizontalAlignment="Center"
                    Padding="30"
                    MouseDown="PopupContent_MouseDown">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="5" Opacity="0.3"/>
                </Border.Effect>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Enhanced Title -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,25">
                        <TextBlock Text="💾 Save Receipt" 
                                  FontSize="22" FontWeight="Bold" 
                                  HorizontalAlignment="Center"
                                  Foreground="#333"/>
                        <TextBlock Text="Save your order for later processing" 
                                  FontSize="14" Foreground="#666"
                                  HorizontalAlignment="Center"
                                  Margin="0,5,0,0"/>
                    </StackPanel>

                    <!-- Receipt Name -->
                    <StackPanel Grid.Row="1" Margin="0,0,0,20">
                        <TextBlock Text="Receipt Name:" 
                                  FontWeight="Bold" 
                                  Margin="0,0,0,8"
                                  FontSize="14"/>
                        <TextBox x:Name="ReceiptNameTextBox" 
                                Height="40" 
                                Padding="12,0" 
                                FontSize="14"
                                Background="#F8F9FA"
                                BorderThickness="1"
                                BorderBrush="#E0E0E0"/>
                    </StackPanel>

                    <!-- Description -->
                    <StackPanel Grid.Row="2" Margin="0,0,0,20">
                        <TextBlock Text="Description:" 
                                  FontWeight="Bold" 
                                  Margin="0,0,0,8"
                                  FontSize="14"/>
                        <TextBox x:Name="DescriptionTextBox" 
                                Height="40" 
                                Padding="12,0" 
                                FontSize="14"
                                Background="#F8F9FA"
                                BorderThickness="1"
                                BorderBrush="#E0E0E0"
                                Text="Order description"/>
                    </StackPanel>

                    <!-- Table Selection -->
                    <StackPanel Grid.Row="3" Margin="0,0,0,20">
                        <TextBlock Text="Table Assignment:" 
                                  FontWeight="Bold" 
                                  Margin="0,0,0,8"
                                  FontSize="14"/>
                        <ComboBox x:Name="TableComboBox" 
                                 Height="40" 
                                 Padding="12,0" 
                                 FontSize="14"
                                 Background="#F8F9FA"
                                 BorderThickness="1"
                                 BorderBrush="#E0E0E0">
                            <ComboBoxItem Content="All Tables" IsSelected="True"/>
                            <ComboBoxItem Content="Table 1"/>
                            <ComboBoxItem Content="Table 2"/>
                            <ComboBoxItem Content="Table 3"/>
                            <ComboBoxItem Content="Table 4"/>
                            <ComboBoxItem Content="Table 5"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Spacer -->
                    <Border Grid.Row="5" Height="20"/>

                    <!-- Enhanced Buttons -->
                    <StackPanel Grid.Row="6" 
                               Orientation="Horizontal" 
                               HorizontalAlignment="Right" 
                               Margin="0,20,0,0">
                        <Button Content="❌ Cancel" 
                               Width="100" Height="40" 
                               Background="#F5F5F5" 
                               Foreground="#666"
                               BorderThickness="1"
                               BorderBrush="#E0E0E0"
                               Margin="0,0,15,0"
                               FontWeight="Bold"
                               Cursor="Hand"
                               Click="CancelSave_Click"/>
                        <Button Content="💾 Save Order" 
                               Width="120" Height="40" 
                               Background="#FF8C42" 
                               Foreground="White"
                               BorderThickness="0"
                               FontWeight="Bold"
                               Cursor="Hand"
                               Click="SaveReceipt_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Border>

        <!-- Enhanced Settings Popup -->
        <Border x:Name="SettingsPopup" 
                Background="#80000000" 
                Visibility="Collapsed"
                Grid.ColumnSpan="3"
                MouseDown="SettingsPopupBackground_MouseDown">
            <Border Background="White" 
                    CornerRadius="16" 
                    Width="500" 
                    Height="600" 
                    VerticalAlignment="Center" 
                    HorizontalAlignment="Center"
                    Padding="30"
                    MouseDown="SettingsPopupContent_MouseDown">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="5" Opacity="0.3"/>
                </Border.Effect>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Settings Header -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,25">
                        <TextBlock Text="⚙️ Settings" 
                                  FontSize="24" FontWeight="Bold" 
                                  HorizontalAlignment="Center"
                                  Foreground="#333"/>
                        <TextBlock Text="Configure your system preferences" 
                                  FontSize="14" Foreground="#666"
                                  HorizontalAlignment="Center"
                                  Margin="0,5,0,0"/>
                    </StackPanel>

                    <!-- Settings Content -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            
                            <!-- Theme Settings -->
                            <Border Background="#F8F9FA" CornerRadius="12" Padding="20" Margin="0,0,0,15">
                                <StackPanel>
                                    <TextBlock Text="🎨 Theme" FontSize="16" FontWeight="Bold" Foreground="#333" Margin="0,0,0,15"/>
                                    
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                        <RadioButton x:Name="LightThemeRadio" Content="Light Theme" 
                                                    IsChecked="True" GroupName="Theme" 
                                                    FontSize="14" Foreground="#555"
                                                    Checked="ThemeChanged"/>
                                        <RadioButton x:Name="DarkThemeRadio" Content="Dark Theme" 
                                                    GroupName="Theme" Margin="20,0,0,0"
                                                    FontSize="14" Foreground="#555"
                                                    Checked="ThemeChanged"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Language Settings -->
                            <Border Background="#F8F9FA" CornerRadius="12" Padding="20" Margin="0,0,0,15">
                                <StackPanel>
                                    <TextBlock Text="🌐 Language" FontSize="16" FontWeight="Bold" Foreground="#333" Margin="0,0,0,15"/>
                                    
                                    <ComboBox x:Name="LanguageComboBox" Height="40" FontSize="14"
                                             Background="White" BorderBrush="#E0E0E0"
                                             SelectionChanged="LanguageChanged">
                                        <ComboBoxItem Content="English" IsSelected="True" Tag="en"/>
                                        <ComboBoxItem Content="Filipino" Tag="fil"/>
                                        <ComboBoxItem Content="Spanish" Tag="es"/>
                                        <ComboBoxItem Content="Chinese" Tag="zh"/>
                                    </ComboBox>
                                </StackPanel>
                            </Border>

                            <!-- Security Settings -->
                            <Border Background="#F8F9FA" CornerRadius="12" Padding="20" Margin="0,0,0,15">
                                <StackPanel>
                                    <TextBlock Text="🔒 Security" FontSize="16" FontWeight="Bold" Foreground="#333" Margin="0,0,0,15"/>
                                    
                                    <Button Content="🔑 Change Password" 
                                           Height="40" 
                                           Background="#FF8C42" 
                                           Foreground="White"
                                           BorderThickness="0"
                                           FontWeight="Bold"
                                           FontSize="14"
                                           Cursor="Hand"
                                           Click="ChangePassword_Click"
                                           Margin="0,0,0,10">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" 
                                                       CornerRadius="8" 
                                                       Padding="{TemplateBinding Padding}">
                                                    <ContentPresenter HorizontalAlignment="Center" 
                                                                    VerticalAlignment="Center"/>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="#E67A36"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </StackPanel>
                            </Border>

                            <!-- Printer Settings -->
                            <Border Background="#F8F9FA" CornerRadius="12" Padding="20">
                                <StackPanel>
                                    <TextBlock Text="🖨️ Printer" FontSize="16" FontWeight="Bold" Foreground="#333" Margin="0,0,0,15"/>
                                    
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <ComboBox x:Name="PrinterComboBox" 
                                                 Grid.Column="0"
                                                 Height="40" 
                                                 FontSize="14"
                                                 Background="White" 
                                                 BorderBrush="#E0E0E0"
                                                 Margin="0,0,10,0">
                                            <ComboBoxItem Content="Default Printer" IsSelected="True"/>
                                            <ComboBoxItem Content="Receipt Printer"/>
                                            <ComboBoxItem Content="Kitchen Printer"/>
                                        </ComboBox>
                                        
                                        <Button Grid.Column="1"
                                               Content="🧪 Test" 
                                               Width="80"
                                               Height="40" 
                                               Background="#4CAF50" 
                                               Foreground="White"
                                               BorderThickness="0"
                                               FontWeight="Bold"
                                               FontSize="12"
                                               Cursor="Hand"
                                               Click="TestPrinter_Click">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Border Background="{TemplateBinding Background}" 
                                                           CornerRadius="8" 
                                                           Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center" 
                                                                        VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="#45A049"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>
                                    </Grid>
                                </StackPanel>
                            </Border>

                        </StackPanel>
                    </ScrollViewer>

                    <!-- Settings Buttons -->
                    <StackPanel Grid.Row="2" 
                               Orientation="Horizontal" 
                               HorizontalAlignment="Right" 
                               Margin="0,25,0,0">
                        <Button Content="❌ Cancel" 
                               Width="100" Height="40" 
                               Background="#F5F5F5" 
                               Foreground="#666"
                               BorderThickness="1"
                               BorderBrush="#E0E0E0"
                               Margin="0,0,15,0"
                               FontWeight="Bold"
                               Cursor="Hand"
                               Click="CancelSettings_Click"/>
                        <Button Content="💾 Save Settings" 
                               Width="130" Height="40" 
                               Background="#FF8C42" 
                               Foreground="White"
                               BorderThickness="0"
                               FontWeight="Bold"
                               Cursor="Hand"
                               Click="SaveSettings_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Border>
    </Grid>
</Window>